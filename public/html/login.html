<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="/css/registration.css">
</head>

<body>
    <div class="login-page flip-card">
        <div class="form ">
          <form class="login-form" id="login-form" name="login-form">
            <input type="email" placeholder="Email address" name="login-email" id="login-email" autofocus value="kevinrodrigues43@gmail.com"/>
            <input type="password" placeholder="Password" name="login-pass" id="login-password" value="Kevinr@78"/>
            <button type="submit">login</button>
            <p>Or</p>

            <p class="message">Not registered? <a href="signup.html">Create an account</a></p>
          </form>
        </div>
      </div>
</body>
<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>

  const form = document.getElementById('login-form')
  form.addEventListener('submit', validateFor)


  
  async function validateFor(e){
    e.preventDefault();

    let email = document.getElementById('login-email').value
    let password = document.getElementById('login-password').value

  let result= await fetch('/home/login', {
    method:'POST',
    headers:{
      "Content-Type":"application/json"
    },body:JSON.stringify({email,password})
  }).then(res=>{
    return res.json()
  }).then(data=>{
    if(!data.ok){
      throw new Error(data.message)
    }
    window.location.href= '/html/meet.html'

  }).catch(err=>{
    Swal.fire({
            title: "Error!",
            text: err,
            icon: "error",
            confirmButtonText: "Cool",
          });
  })

}
</script>
</html>